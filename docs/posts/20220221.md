# 7セグメントディスプレイとシフトレジスタで遊んでみた。

[参考](https://docs.sunfounder.com/projects/davinci-kit/ja/latest/1.1.4_7-segment_display.html)

## 7セグメントディスプレイ

(DP),G,F,E,D,C,B,Aという8つの端子と、GNDが2本あるみたい。
この(DP),G,F,E,D,C,B,Aがそれぞれ、所定位置のLEDに対応している。
DPはDecimal Pointの略で、右下の点。小数点として使う。

要は `b11111111` を送ると、LEDは全部点灯し、 `b00000000` を送れば全部消灯する。
`b01101101`を送ると `5` に見えるように点灯する。

でも、プログラムから8つの信号を出すのはだるい。

## シフトレジスタ

`74HC595` を使う。

> 74HC595のピンとその機能：
> Q0-Q7：8ビットパラレルデータ出力端子。8個のLEDまたは8個の7セグメントディスプレイを直接制御することができます。
> Q7': 複数の74HC595を直列に接続するために，別の74HC595のDSに接続される直列出力端子。
> MR: リセットピン－低レベルで作動;
> SHcp：シフトレジスタの時系列入力。 立ち上がりエッジでは、シフトレジスタのデータが1ビット連続して移動します。つまり、Q1のデータがQ2に移動します。 
> 立ち下がりエッジにある間、シフトレジスタのデータ変更されません。
> STcp：ストレージレジスタの時系列入力。 立ち上がりエッジで、シフトレジスタのデータがメモリレジスタに移動します。
> CE : 出力イネーブルピン、低レベルで作動する。
> DS : 直列データ入力ピン
> VCC : 正の電源電圧
> GND : 接地

要は

DSにLOW/HIGHを送って、SHcpにHIGH→LOWを送る。これで1bitセットされる。
これを8ビット分繰り返して、
STcpにHIGH→LOWを送ると、シフトレジスタにセットされた情報がメモリレジスタに移動、つまり、Q0-07からHIGH/LOWが流れる。

これで、7セグメントディスプレイの(DP),G,F,E,D,C,B,AにHIGH/LOWが送られる、というわけか。

なるほど。よくわからん。

tktc 2022/02/21 17:50

[index](index.md)